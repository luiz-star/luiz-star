<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>AWS Lakehouse (Governança) — Diagrama SVG</title>
  <style>
    :root {
      --bg:#0d1117; --panel:#161b22; --stroke:#30363d; --text:#e6edf3; --muted:#9aa4b2; --accent:#1f6feb; --ok:#238636;
    }
    :root.light {
      --bg:#ffffff; --panel:#f6f8fa; --stroke:#d0d7de; --text:#24292f; --muted:#57606a; --accent:#0969da; --ok:#1a7f37;
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,"Noto Sans","Helvetica Neue",Arial,"Apple Color Emoji","Segoe UI Emoji"}
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    header{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px;flex-wrap:wrap}
    h1{font-size:20px;margin:0}
    .btn{border:1px solid var(--stroke);background:transparent;color:var(--text);padding:8px 12px;border-radius:8px;cursor:pointer}
    .canvas{background:var(--bg);border:1px solid var(--stroke);border-radius:12px;overflow:auto}
    .note{color:var(--muted);font-size:14px;margin:8px 0 16px}
    svg{display:block;width:100%;height:auto}
    @media (max-width:720px){ h1{font-size:18px} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>AWS Lakehouse (Governança)</h1>
      <div>
        <button class="btn" id="toggleTheme">Alternar tema</button>
      </div>
    </header>
    <p class="note">Diagrama responsivo em SVG embutido. Você pode abrir este HTML no navegador ou referenciar o arquivo no README.</p>

    <div class="canvas">
      <!-- SVG embutido -->
      <svg viewBox="0 0 960 740" role="img" aria-labelledby="title desc">
        <title id="title">AWS Lakehouse com Governança</title>
        <desc id="desc">Fluxo de produtores para S3 (Bronze, Silver, Gold), catálogo/governança, consulta e consumo, com observabilidade.</desc>

        <!-- Fundo -->
        <rect width="960" height="740" fill="var(--bg)"/>

        <!-- Estilos de texto -->
        <g font-family="ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace">
          <!-- Título -->
          <text x="24" y="36" fill="var(--text)" font-size="20" font-weight="700">AWS Lakehouse (Governança)</text>
          <text x="24" y="58" fill="var(--muted)" font-size="13">
            Produtores → Ingestão → S3 (Bronze/Silver/Gold) → Catálogo/Governança → Consulta → BI/Consumo → Observabilidade
          </text>

          <!-- Lanes -->
          <path d="M160 80V700" stroke="var(--stroke)" stroke-width="1" stroke-dasharray="4 4" fill="none"/>
          <path d="M360 80V700" stroke="var(--stroke)" stroke-width="1" stroke-dasharray="4 4" fill="none"/>
          <path d="M560 80V700" stroke="var(--stroke)" stroke-width="1" stroke-dasharray="4 4" fill="none"/>
          <path d="M760 80V700" stroke="var(--stroke)" stroke-width="1" stroke-dasharray="4 4" fill="none"/>

          <!-- Lanes labels -->
          <g fill="var(--muted)" font-size="12" text-anchor="middle">
            <text x="160" y="92">Origem</text>
            <text x="360" y="92">Dados</text>
            <text x="560" y="92">Governança</text>
            <text x="760" y="92">Serviço</text>
          </g>

          <!-- Produtores -->
          <rect x="40" y="100" width="220" height="120" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="150" y="130" text-anchor="middle" fill="var(--text)" font-size="14">Produtores</text>
          <g fill="var(--muted)" font-size="12" text-anchor="middle">
            <text x="150" y="155">Apps • APIs • DBs</text>
            <text x="150" y="175">Batch • CDC • IoT</text>
          </g>

          <!-- Ingestão -->
          <rect x="40" y="260" width="220" height="140" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="150" y="290" text-anchor="middle" fill="var(--text)" font-size="14">Ingestão</text>
          <g fill="var(--muted)" font-size="12" text-anchor="middle">
            <text x="150" y="315">AWS DMS (CDC)</text>
            <text x="150" y="335">Glue Jobs (Batch)</text>
            <text x="150" y="355">Lambda • Kinesis</text>
          </g>

          <!-- Setas Produtores/Ingestão -> S3 -->
          <line x1="260" y1="160" x2="356" y2="160" stroke="var(--muted)" stroke-width="1.4"/>
          <path d="M356 160l-10-6v12z" fill="var(--muted)"/>
          <line x1="260" y1="330" x2="356" y2="330" stroke="var(--accent)" stroke-width="2"/>
          <path d="M356 330l-10-7v14z" fill="var(--accent)"/>

          <!-- Data Lake S3 -->
          <rect x="360" y="120" width="240" height="430" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="480" y="150" text-anchor="middle" fill="var(--text)" font-size="14">Data Lake — Amazon S3</text>

          <!-- Bronze -->
          <rect x="380" y="180" width="200" height="90" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="480" y="205" text-anchor="middle" fill="var(--text)" font-size="14">Bronze (Raw)</text>
          <text x="480" y="230" text-anchor="middle" fill="var(--muted)" font-size="12">Dados brutos, esquema flexível</text>

          <!-- Silver -->
          <rect x="380" y="290" width="200" height="90" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="480" y="315" text-anchor="middle" fill="var(--text)" font-size="14">Silver (Curated)</text>
          <text x="480" y="340" text-anchor="middle" fill="var(--muted)" font-size="12">Limpeza • Conformidade</text>

          <!-- Gold -->
          <rect x="380" y="400" width="200" height="90" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="480" y="425" text-anchor="middle" fill="var(--text)" font-size="14">Gold (Serving)</text>
          <text x="480" y="450" text-anchor="middle" fill="var(--muted)" font-size="12">Marts • KPIs • SLAs</text>

          <!-- Liga Ingestão -> Bronze/Silver -->
          <line x1="260" y1="330" x2="380" y2="225" stroke="var(--muted)" stroke-width="1.4"/>

          <!-- Catálogo & Governança -->
          <rect x="620" y="180" width="280" height="150" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="760" y="205" text-anchor="middle" fill="var(--text)" font-size="14">Catálogo &amp; Governança</text>
          <g fill="var(--muted)" font-size="12" text-anchor="middle">
            <text x="760" y="230">Glue Data Catalog</text>
            <text x="760" y="250">Lake Formation (LF-Tags)</text>
            <text x="760" y="270">IAM • S3 Policies</text>
          </g>

          <!-- Ligações S3 -> Catálogo/Gov -->
          <line x1="580" y1="225" x2="620" y2="225" stroke="var(--muted)" stroke-width="1.4"/>
          <line x1="580" y1="335" x2="620" y2="335" stroke="var(--muted)" stroke-width="1.4"/>
          <line x1="580" y1="445" x2="620" y2="265" stroke="var(--muted)" stroke-width="1.4"/>

          <!-- Consulta / Processamento -->
          <rect x="620" y="360" width="280" height="120" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="760" y="385" text-anchor="middle" fill="var(--text)" font-size="14">Consulta / Processamento</text>
          <text x="760" y="408" text-anchor="middle" fill="var(--muted)" font-size="12">Athena • Redshift • EMR/Spark • Glue</text>

          <!-- Ligações S3 -> Consulta -->
          <line x1="580" y1="335" x2="620" y2="395" stroke="var(--muted)" stroke-width="1.4"/>
          <line x1="580" y1="445" x2="620" y2="420" stroke="var(--muted)" stroke-width="1.4"/>

          <!-- BI / Consumo -->
          <rect x="620" y="500" width="280" height="110" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="760" y="525" text-anchor="middle" fill="var(--text)" font-size="14">BI / Consumo</text>
          <text x="760" y="548" text-anchor="middle" fill="var(--muted)" font-size="12">QuickSight • Apps • APIs • Exports</text>

          <!-- Observabilidade & Auditoria -->
          <rect x="360" y="570" width="240" height="110" rx="8" ry="8" fill="var(--panel)" stroke="var(--stroke)" stroke-width="1.2"/>
          <text x="480" y="595" text-anchor="middle" fill="var(--text)" font-size="14">Observabilidade &amp; Auditoria</text>
          <text x="480" y="618" text-anchor="middle" fill="var(--muted)" font-size="12">CloudWatch • CloudTrail • Logs</text>

          <!-- Setas finais -->
          <line x1="760" y1="480" x2="760" y2="500" stroke="var(--muted)" stroke-width="1.4"/>
          <line x1="760" y1="555" x2="600" y2="600" stroke="var(--muted)" stroke-width="1.4"/>

          <!-- Pills -->
          <rect x="392" y="505" width="88" height="28" rx="12" ry="12" fill="#0b1220" stroke="var(--accent)" stroke-width="1.1"/>
          <text x="436" y="524" text-anchor="middle" fill="var(--muted)" font-size="12">DQ/Qualidade</text>
          <rect x="500" y="505" width="88" height="28" rx="12" ry="12" fill="#0b1220" stroke="var(--accent)" stroke-width="1.1"/>
          <text x="544" y="524" text-anchor="middle" fill="var(--muted)" font-size="12">Segurança</text>
        </g>
      </svg>
    </div>

    <p class="note">Dica: Para usar no README, você pode subir este arquivo e linkar com:
      <code>docs/diagramas/aws-lakehouse.html</code>. Muitos leitores mostram link clicável.
    </p>
  </div>

  <script>
    const btn = document.getElementById('toggleTheme');
    btn.addEventListener('click', () => {
      const root = document.documentElement;
      root.classList.toggle('light');
      btn.textContent = root.classList.contains('light') ? 'Alternar tema (escuro)' : 'Alternar tema';
    });
  </script>
</body>
</html>
